<odoo>
  <record id="view_penalty_form" model="ir.ui.view">
    <field name="name">penalty.form</field>
    <field name="model">penalty.penalty</field>
    <field name="arch" type="xml">
      <form>
        <header>
          <button name="set_to_draft" type="object" string="Set to Draft"
                  class="btn-secondary"
                  invisible="state != 'confirm'"/>
          <button name="action_confirm" type="object" string="Confirm"
                  class="btn-primary"
                  invisible="state != 'draft'"/>

          <button name="action_create_entry" type="object" string="Create Entry"
                  class="btn-primary"
                  invisible="state != 'confirm'"/>

          <button name="action_done" type="object" string="Done"
                  class="btn-success"
                  invisible="state != 'confirm'"/>
<!--          <button name="action_calculate_lines" type="object" string="Calculate"-->
<!--                  class="btn-info"-->
<!--                  invisible="state == 'done'"/>-->
          <button name="action_export_report"
                  type="object"
                  string="Export Report"
                  class="btn-info"
                  invisible="state == 'draft'"/>




          <field name="state" widget="statusbar" statusbar_visible="draft,confirm,done"/>
        </header>

        <sheet>
          <group>
            <group>
              <field name="employee_id"/>
              <field name="amount"/>
              <field name="interval" string="Interval (Months)"/>
            </group>

            <group>
              <field name="date"/>
              <field name="duration"/>
              <field name="contract_id" domain="[('employee_id', '=', employee_id)]" />
            </group>
          </group>
          <group>
              <field name="debit_account_id"/>
              <field name="credit_account_id"/>
              <field name="journal_id"/>
              <field name="move_id" readonly="1"
                   context="{'form_view_ref': 'account.view_move_form'}"
                   options="{'no_create': True}"/>
          </group>


          <notebook>
            <page string="Penalty Lines">
              <field name="penalty_lines">
                <list editable="bottom">
                  <field name="date"/>
                  <field name="amount" sum="Total"/>
                </list>
              </field>
            </page>
          </notebook>
        </sheet>
      </form>
    </field>
  </record>

  <record id="view_penalty_list" model="ir.ui.view">
    <field name="name">penalty.list</field>
    <field name="model">penalty.penalty</field>
    <field name="arch" type="xml">
      <list>
        <field name="employee_id" readonly="1"/>
        <field name="date" readonly="1"/>
        <field name="amount" readonly="1"/>
        <field name="state" readonly="1"/>
      </list>
    </field>
  </record>

  <record id="penalty_action" model="ir.actions.act_window">
    <field name="name">Penalty</field>
    <field name="res_model">penalty.penalty</field>
    <field name="view_mode">list,form</field>
  </record>

  <menuitem id="menu_penalty_root" name="Penalty"/>
  <menuitem id="menu_penalty_main" name="Penalties" parent="menu_penalty_root"/>
  <menuitem id="menu_penalty_items" name="Penalty Records"
            parent="menu_penalty_main" action="penalty_action"/>

  <record id="penalty_export_all_button" model="ir.actions.server">
    <field name="name">Export All Penalties</field>
    <field name="model_id" ref="model_penalty_penalty"/>
    <field name="binding_model_id" ref="model_penalty_penalty"/>
    <field name="binding_view_types">list</field>
    <field name="state">code</field>
    <field name="code">action = env['penalty.penalty'].action_export_all_penalties()</field>
</record>

</odoo>
